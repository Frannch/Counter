<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../estilos/count.css">
    <link rel="shorcut icon" href="../sprites/favicon.ico">
    <title>Contador</title>
    <!-- Estilos m√≠nimos para centrar el bot√≥n -->
    <style>
      .center-overlay {
        position: fixed;
        inset: 0;
        display: grid;
        place-items: center;
        z-index: 9998;
        pointer-events: none; /* evita bloquear otros clics, el bot√≥n tiene eventos */
      }
      #countdownBtn {
        pointer-events: auto;
        width: 96px;
        height: 96px;
        border-radius: 50%;
        border: 1px solid rgba(255,255,255,.25);
        background: rgba(40,40,48,.9);
        color: #fff;
        font-size: 2rem;
        font-weight: 700;
        box-shadow: 0 12px 28px rgba(0,0,0,.45);
        cursor: pointer;
        position: relative;
        overflow: hidden;
        transform: scale(0.5); /* reduce al 50% */
      }
      #countdownBtn::after{
        content:""; position:absolute; left:0; bottom:0; width:100%; height:0%;
        background: linear-gradient(180deg, rgba(194,24,91,0.28), rgba(194,24,91,.55));
        transition: height .35s ease;
      }
      #countdownBtn:hover::after{ height:100% }
      /* Ocultar todos los elementos cuando termina */
      .hidden-all * { visibility: hidden !important; }
    </style>
</head>

<body>
    <!-- Bot√≥n centrado con cuenta regresiva -->
    <div class="center-overlay">
      <button id="countdownBtn">3</button>
    </div>

    <button id="ch" onclick="handleClickActions()">Click me</button>

    <h1 id="tet">Fototeta?</h1>

    <!-- Audio en silencio al principio -->
    <audio id="myAudio" autoplay loop muted>
        <source src="../audio/song.mp3" type="audio/mpeg">
        No se pudo reproducir la canci√≥n :c
    </audio>
    <audio id="max" autoplay loop muted>
        <source src="../audio/max.mp3" type="audio/mpeg">
        </audio>
    <audio id="myedio" autoplay loop muted>
        <source src="../audio/song2.mp3" type="audio/mpeg">
    </audio>

    <!-- Bot√≥n con imagen de play -->
    <button id="desgraciado" onclick="toggleAudio()"></button>
    <button id="botonazo" onclick="toggleAudioo()"></button>
    <a href="index.html"><button id="cart"></button></a>

    <div id="countdown-container">
        <div class="countdown" id="countdown">Cargando...</div>
    </div>

    <div class="gifs">
        <img id="h" src="../sprites/logro2.png">
        <img id="mheart" src="../sprites/VeC.gif" alt="">
        <img id="rheart" src="../sprites/y2.gif" alt="">
    </div>

    <div class="counter-container">
        <h1>Han pasado</h1>
        <div class="time" id="timeCount"></div>
        <p>Desde que somos novios :)</p>
    </div>

    <script>
        // üïí Fecha objetivo para la cuenta regresiva (Cambia esto)
        const targetDate = new Date("2025-09-26T22:00:00").getTime();

        function updateCountdown() {
            const now = new Date().getTime();
            const timeLeft = targetDate - now;

            if (timeLeft > 0) {
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                document.getElementById("countdown").textContent =
                    `${days}d ${hours}h ${minutes}m ${seconds}s`;
            } else {
                document.getElementById("countdown").textContent = "¬°Tiempo terminado!";
                clearInterval(countdownInterval);
            }
        }

        // ‚è≥ Actualizar cada segundo
        updateCountdown();
        const countdownInterval = setInterval(updateCountdown, 1000);
    </script>
    <script>
        // Variable de estado para saber si el audio est√° reproducido o pausado
        let isPlaying = false;

        // Funci√≥n para alternar entre play y pause
        function toggleAudio() {
            const audio = document.getElementById('myAudio');
            const button = document.getElementById('desgraciado');

            if (isPlaying) {
                // Pausar el audio
                audio.pause();
                button.style.backgroundImage = "url(../sprites/pla.png)"; // Cambia a imagen de play
            } else {
                // Reproducir el audio
                audio.muted = false;  // Asegura que no est√© silenciado
                audio.play();
                button.style.backgroundImage = "url(../sprites/pause.png)"; // Cambia a imagen de pausa
            }

            // Cambia el estado
            isPlaying = !isPlaying;
        }
    </script>
    <script>
        function toggleAudioo() {
            const audio = document.getElementById('myedio');
            const button = document.getElementById('botonazo');

            if (isPlaying) {
                // Pausar el audio
                audio.pause();
                button.style.backgroundImage = "url(../sprites/pla.png)"; // Cambia a imagen de play
            } else {
                // Reproducir el audio
                audio.muted = false;  // Asegura que no est√© silenciado
                audio.play();
                button.style.backgroundImage = "url(../sprites/pause.png)"; // Cambia a imagen de pausa
            }

            // Cambia el estado
            isPlaying = !isPlaying;
        }


    function handleClickActions() {
    // Cambiar imagen
   document.body.style.backgroundImage = 'url(../sprites/tet.jpg)'
    
    // Cambiar fondo
    document.getElementById('tet').style.visibility = 'visible';

    // Mostrar mensaje
    document.getElementById('countdown-container').style.visibility='hidden';
    document.getElementById('timeCount').style.visibility='hidden';
    document.getElementsByClassName('counter-container')[0].style.visibility='hidden';
    document.getElementById('ch').style.visibility = 'hidden';
    document.getElementById('mheart').style.visibility = 'hidden';
    document.getElementById('rheart').style.visibility = 'hidden';
}

// Asignar al bot√≥n
document.getElementById('miBoton').addEventListener('click', handleClickActions);
    </script>
    <script>
        // Fecha de inicio de la relaci√≥n
        const startDate = new Date("2025-02-04T20:00:00");

        function updateCounter() {
            const today = new Date();
            const timeDifference = today - startDate;

            const days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);

            document.getElementById("timeCount").textContent =
                `${days} d√≠as, ${hours} horas, ${minutes} minutos, ${seconds} segundos`;
        }

        // Actualiza el contador cada segundo
        updateCounter();
        setInterval(updateCounter, 1000);
    </script>
    <script>
        function checkSpecialDate() {
            const now = new Date();
            const day = now.getDate();

            let popup = document.getElementById("anniv-popup");

            if (day === 4) {
                if (!popup) {
                    document.body.insertAdjacentHTML("beforeend", `
                        <div id="anniv-popup" style="
                            position:fixed;top:0;left:0;width:100vw;height:100vh;
                            background:rgba(0,0,0,0.7);display:flex;
                            align-items:center;justify-content:center;z-index:9999;">
                            <div style="
                                background:#fff;color:#c2185b;padding:40px 30px;
                                border-radius:20px;box-shadow:0 0 20px #000a;
                                text-align:center;max-width:90vw;">
                                <h2 style="margin-bottom:20px;font-size:2.5rem;">üéâ ¬°Feliz Aniversario! üéâ</h2>
                                <p style="font-size:1.3rem;">Gracias por este tiempo juntosüíñ</p>
                                <button onclick="document.getElementById('anniv-popup').remove()" style="
                                    margin-top:25px;padding:10px 30px;font-size:1.2rem;
                                    background:#c2185b;color:#fff;border:none;border-radius:8px;cursor:pointer;">
                                    Cerrar
                                </button>
                            </div>
                        </div>
                    `);
                }
            } else {
                if (popup) popup.remove();
            }
        }

        checkSpecialDate();
        setInterval(checkSpecialDate, 60000);
    </script>
<script>
function aplicarTema() {
  const tema = localStorage.getItem('tema');
  const pagina = window.location.pathname.split("/").pop();

  document.body.classList.remove(
    'fondo-index-tema1', 'fondo-index-tema2',
    'fondo-contador-tema1', 'fondo-contador-tema2'
    // ...agrega m√°s clases si tienes m√°s p√°ginas
  );

  if (tema === 'tema1') {
    if (pagina === 'index.html') {
      document.body.classList.add('fondo-index-tema1');
    } else if (pagina === 'count.html') {
      document.body.classList.add('fondo-contador-tema1');
    }
    // ...m√°s p√°ginas
  } else if (tema === 'tema2') {
    if (pagina === 'index.html') {
      document.body.classList.add('fondo-index-tema2');
    } else if (pagina === 'count.html') {
      document.body.classList.add('fondo-contador-tema2');
    }
    // ...m√°s p√°ginas
  }
}
window.addEventListener('DOMContentLoaded', aplicarTema);
</script>
    <!-- L√≥gica del bot√≥n de cuenta regresiva -->
    <script>
      (function(){
        const btn = document.getElementById('countdownBtn');
        let value = 3;

        function hideEverythingAndPlay(){
          // Oculta todo el contenido visual
          document.body.classList.add('hidden-all');
          // Pone la foto de fondo
          document.body.style.backgroundImage = 'url(../sprites/max.jpeg)';
          document.body.style.backgroundSize = 'cover';
          document.body.style.backgroundPosition = 'center';

          // Reproducir la canci√≥n principal (desmutea y play)
          const audio = document.getElementById('max');
          if (audio) {
            audio.muted = false;
            audio.currentTime = 0;
            audio.play().catch(()=>{ /* ignorar errores de autoplay */ });
          }

          // Elimina el bot√≥n y su overlay
          const overlay = document.querySelector('.center-overlay');
          if (overlay) overlay.remove();
        }

        btn.addEventListener('click', () => {
          value = Math.max(0, value - 1);
          btn.textContent = value;
          if (value === 0) {
            hideEverythingAndPlay();
          }
        });
      })();
    </script>
</body>
</html>